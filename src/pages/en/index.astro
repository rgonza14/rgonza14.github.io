---
import Layout from '../../layouts/Layout.astro';
import Sidebar from '../../components/Sidebar.astro';
import Sections from '../../components/Sections.astro';
import '../../styles/global.css';

const lang = 'en' as const;

const enModules = import.meta.glob('../../content/en/*.md', { eager: true });
const entries = Object.values(enModules)
    .map((m: any) => ({ frontmatter: m.frontmatter, Content: m.default }))
    .sort(
        (a, b) => (a.frontmatter.order ?? 999) - (b.frontmatter.order ?? 999)
    );

const navItems = entries.map(e => ({
    id: e.frontmatter.id,
    label: e.frontmatter.navLabel
}));

const title = 'Gonzalo Ruiz — Fullstack Developer';
const description =
    'Gonzalo Ruiz portfolio — Fullstack focused on APIs, architecture, automation, and databases.';
---

<Layout lang={lang} title={title} description={description}>
    <div
        class='max-w-7xl mx-auto md:grid md:grid-cols-[140px_1fr] md:h-screen md:overflow-hidden'
    >
        <Sidebar brand='Ruiz Gonzalo' items={navItems} lang={lang} />
        <Sections entries={entries} />
    </div>
</Layout>
