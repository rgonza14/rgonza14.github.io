---
import Divider from './Divider.astro';
import Hero from './sections/Hero.astro';
import Skills from './sections/Skills.astro';
import List from './sections/List.astro';
import Simple from './sections/Simple.astro';
import Contact from './sections/Contact.astro';
import Projects from './sections/Projects.astro';
import type { AstroComponentFactory } from 'astro/runtime/server/index.js';
import { Github, Linkedin } from '@lucide/astro';

const { entries } = Astro.props as {
    entries: Array<{ frontmatter: any; Content: any }>;
};

const registry: Record<string, any> = {
    hero: Hero,
    skills: Skills,
    list: List,
    simple: Simple,
    contact: Contact,
    projects: Projects
};

type Social = {
    link: string;
    icon: AstroComponentFactory;
};

const socials: Social[] = [
    {
        link: 'https://github.com/rgonza14',
        icon: Github
    },
    {
        link: 'https://www.linkedin.com/in/rgonza14/',
        icon: Linkedin
    }
];
---

<main
    class='px-4 md:px-12 pt-10 md:pt-20 pb-10 md:h-screen md:overflow-y-auto md:no-scrollbar'
>
    <div class='max-w-225 mx-auto flex flex-col gap-24'>
        {
            entries.map(({ frontmatter, Content }) => {
                const Section = registry[frontmatter.type];
                if (!Section) return null;

                return (
                    <>
                        <Section frontmatter={frontmatter} Content={Content} />
                        <Divider />
                    </>
                );
            })
        }

        <footer class='text-white/55 pb-6 flex items-center justify-between'>
            <span class='text-base'>
                © {new Date().getFullYear()} · Ruiz Gonzalo
            </span>

            <div class='flex items-center gap-x-8'>
                {
                    socials.map((social: Social) => (
                        <a
                            href={social.link}
                            target='_blank'
                            rel='noopener noreferrer'
                        >
                            <social.icon size='24' />
                        </a>
                    ))
                }
            </div>
        </footer>
    </div>
</main>
