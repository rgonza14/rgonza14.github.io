---
import Button from '../Button.astro';

type ProjectItem = {
    title: string;
    meta?: string;
    description?: string;
    time?: string;
    image?: string;
    url?: string;
    ctaLabel?: string;
};

type FM = {
    id: string;
    title: string;
    items?: ProjectItem[];
};

const { frontmatter } = Astro.props as { frontmatter: FM };
const { id, title, items = [] } = frontmatter;
---

<section id={id} class='flex flex-col gap-8 scroll-mt-20'>
    <h2 class='tracking-wide text-cyan-300'>{title}</h2>

    <div class='flex flex-col gap-6'>
        {
            items.map(it => (
                <article class='group w-full overflow-hidden rounded-2xl border border-white/10 bg-white/[0.02] '>
                    <div class='grid gap-0 md:grid-cols-[360px_1fr]'>
                        <div class='relative aspect-[16/10] md:aspect-auto md:min-h-[220px]'>
                            {it.image ? (
                                <img
                                    src={it.image}
                                    alt={it.title}
                                    loading='lazy'
                                    class='absolute inset-0 h-full w-full object-cover opacity-90 transition group-hover:opacity-100'
                                />
                            ) : (
                                <div class='absolute inset-0 grid place-items-center bg-white/[0.03]'>
                                    <span class='text-[12px] text-white/40'>
                                        Sin imagen
                                    </span>
                                </div>
                            )}

                            <div class='pointer-events-none absolute inset-0 bg-gradient-to-r from-black/45 via-black/15 to-transparent md:from-black/25' />
                        </div>

                        <div class='flex flex-col gap-4 p-5 md:p-6'>
                            <header class='flex flex-col gap-2'>
                                <div class='flex items-start justify-between gap-3'>
                                    <h3 class='text-[16px] font-semibold text-white/90 leading-snug'>
                                        {it.title}
                                    </h3>

                                    {it.time && (
                                        <span class='text-[11px] text-white/45 whitespace-nowrap'>
                                            {it.time}
                                        </span>
                                    )}
                                </div>

                                {it.meta && (
                                    <div class='flex flex-wrap gap-2'>
                                        {it.meta.split(',').map(t => (
                                            <span class='rounded-full border border-white/10 bg-white/3 px-3 py-1 text-[11px] text-cyan-300/90'>
                                                {t.trim()}
                                            </span>
                                        ))}
                                    </div>
                                )}
                            </header>

                            {it.description && (
                                <p class='leading-relaxed text-white/90 max-w-205'>
                                    {it.description}
                                </p>
                            )}

                            <div class='mt-1 flex items-center gap-3'>
                                {it.url ? (
                                    <Button href={it.url}>Visitar</Button>
                                ) : (
                                    <span class='text-[12px] text-white/40'>
                                        Sin link
                                    </span>
                                )}
                            </div>
                        </div>
                    </div>
                </article>
            ))
        }
    </div>
</section>
